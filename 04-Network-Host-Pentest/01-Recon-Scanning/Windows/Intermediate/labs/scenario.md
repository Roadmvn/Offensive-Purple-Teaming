# Lab Challenge - Windows Recon Intermediate

## Scénario : Audit d'une infrastructure Windows d'entreprise

Vous êtes pentester senior chargé d'évaluer la sécurité d'une infrastructure Windows d'entreprise de 500 employés répartis sur 3 sites. L'environnement comprend une forêt Active Directory multi-domaines (CORP.LOCAL, DEV.CORP.LOCAL, DMZ.CORP.LOCAL) avec des relations de confiance complexes.

## ⚑ Étape 1 : Énumération furtive multi-domaines

**Questions :**
1. Énumérez tous les domaines de la forêt et leurs relations de confiance en utilisant uniquement PowerView.
2. Identifiez tous les contrôleurs de domaine de chaque domaine avec leurs rôles FSMO.
3. Découvrez les comptes de service avec des SPNs dans tous les domaines accessibles.
4. Cartographiez les groupes privilégiés inter-domaines et leurs membres.

## ⚑ Étape 2 : Reconnaissance distribuée et énumération de services

**Questions :**
1. Développez un scanner PowerShell distribué capable de traiter 500+ cibles.
2. Identifiez tous les serveurs avec WinRM activé et testez l'accès.
3. Énumérez tous les partages SMB accessibles et classifiez-les par niveau de sensibilité.
4. Découvrez les services non-standard sur des ports élevés (>10000).

## ⚑ Étape 3 : Analyse de vulnérabilités et chemins d'attaque

**Questions :**
1. Utilisez les scripts NSE pour détecter toutes les vulnérabilités SMB.
2. Identifiez les systèmes avec des délégations Kerberos non contraintes.
3. Analysez les GPO pour identifier les configurations dangereuses.
4. **Bonus expert :** Créez un graphique des chemins d'attaque vers les Domain Admins.

